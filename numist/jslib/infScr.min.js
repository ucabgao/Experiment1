// ©/info: https://github.com/numist/jslib/blob/master/infScr.js
var infScrEnabled=true,
infScrLoadingFeedback="<p>loading…</p>",
infScrItemSelector=function(a){return $(a).find("article").not(":last")},
infScrMoreLinkSelector=function(a){return $(a).find("article#more a")};

(function(){var d={idle:0,loading:1};var a=d.idle;var b=null;function c(){if(!infScrEnabled){return}function g(k){if(b==null){regexp=/\/pages?\/([0-9]+)-?[0-9]*\/?$/;if(regexp.test(window.location.href)){nextPage=regexp.exec(window.location.href);b=nextPage[1]}else{if(regext.test(k)){nextPage=regexp.exec(k);b=nextPage[1]-1}else{return}}}k=k.replace("page/","pages/"+b+"-");window.history.replaceState(null,null,k)}function f(k,l){for(i=0;i<l.length;i++){if($(k).html()==$(l[i]).html()){return true}}return false}var j=infScrMoreLinkSelector(document).filter(":visible").last();if(j.length==0){return}if(a==d.idle&&($(document).height()<$(document).scrollTop()+(2*$(window).height())||j.offset().top<$(window).scrollTop()+$(window).height())){a=d.loading;var h=j.attr("href"),e=false;if(h.length>0&&j.css("display")!="none"&&!!(window.history&&history.replaceState)){$.ajax({type:"GET",url:h,beforeSend:function(){if(infScrLoadingFeedback.length){e=j.clone().empty().insertBefore(j).append(infScrLoadingFeedback)}j.hide()},success:function(l){var k=infScrItemSelector(l);if(k.length>0){g(h);k.insertAfter(infScrItemSelector(document).last());j.attr("href",infScrMoreLinkSelector(l).attr("href"));$(l).filter("script").each(function(m,o){if(!f(o,$(document).find("script"))){var n=document.createElement("script");n.charset="utf-8";n.type="text/javascript";if(o.src){n.src=o.src}else{if($(o).html().length){n.innerHTML=$(o).html()}}document.body.appendChild(n)}})}},complete:function(k,l){if(e){e.remove()}j.show();a=d.idle},dataType:"html"})}}}$(document).ready(function(){$(window).scroll(function(){$.doTimeout("scroll",200,c)})})})();